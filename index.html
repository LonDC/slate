<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LDC Via API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["java","javascript"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://ldcvia.com'>Sign Up for a trial account</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the LDC Via API! You can use our API to access LDC Via API endpoints, this allows you to access and modify documents within databases in your organisation.</p>

<p>We have language bindings in Java and JavaScript (jQuery)! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To authorize, always pass the &lsquo;apikey&rsquo; header:</p>
</blockquote>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">ldcvia</span><span class="o">.</span><span class="na">rest</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.http.HttpEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ResponseHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpGet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.CloseableHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.HttpClients</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.util.EntityUtils</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.ibm.commons.util.io.json.JsonException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ibm.commons.util.io.json.JsonJavaArray</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ibm.commons.util.io.json.JsonJavaFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ibm.commons.util.io.json.JsonJavaObject</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ibm.commons.util.io.json.JsonParser</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ibm.xsp.extlib.util.ExtLibUtil</span><span class="o">;</span>

<span class="cm">/**
 * Get a list of databases that the current user has access to
 *  
 * @return
 * @throws ClientProtocolException
 * @throws IOException
 * @throws JsonException
 */</span>
<span class="kd">public</span> <span class="n">JsonJavaArray</span> <span class="nf">getDatabases</span><span class="p">(</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">JsonException</span><span class="o">{</span>
    <span class="n">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">loadURL</span><span class="o">(</span><span class="s">"/1.0/databases"</span><span class="o">);</span>
    <span class="n">JsonJavaFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">JsonJavaFactory</span><span class="o">.</span><span class="na">instanceEx</span><span class="o">;</span>
    <span class="n">JsonJavaObject</span> <span class="n">json</span> <span class="o">=</span> <span class="o">(</span><span class="n">JsonJavaObject</span><span class="o">)</span> <span class="n">JsonParser</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">factory</span><span class="o">,</span> <span class="n">responseBody</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="na">getAsArray</span><span class="o">(</span><span class="s">"databases"</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
 * Helper method to request a URL from the LDC Via service
 * @param url
 * @return
 * @throws ClientProtocolException
 * @throws IOException
 */</span>
<span class="kd">private</span> <span class="n">String</span> <span class="nf">loadURL</span><span class="p">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">CloseableHttpClient</span> <span class="n">httpclient</span> <span class="o">=</span> <span class="n">HttpClients</span><span class="o">.</span><span class="na">createDefault</span><span class="o">();</span>
    <span class="n">HttpGet</span> <span class="n">httpget</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpGet</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">baseurl</span> <span class="o">+</span> <span class="n">url</span><span class="o">);</span>

    <span class="c1">// Create a custom response handler</span>
    <span class="n">ResponseHandler</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">responseHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResponseHandler</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="n">handleResponse</span><span class="o">(</span><span class="kd">final</span> <span class="n">HttpResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getStatusCode</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">status</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">HttpEntity</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">();</span>
                <span class="k">return</span> <span class="n">entity</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">EntityUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">entity</span><span class="o">)</span> <span class="o">:</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">ClientProtocolException</span><span class="o">(</span><span class="s">"Unexpected response status: "</span> <span class="o">+</span> <span class="n">status</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">};</span>
    <span class="n">httpget</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"apikey"</span><span class="o">,</span> <span class="s">"MYSECRETAPIKEY"</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">httpclient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">httpget</span><span class="o">,</span> <span class="n">responseHandler</span><span class="o">);</span>
<span class="o">}</span>

</code></pre>
<pre><code class="highlight javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="s1">'apikey'</span><span class="p">:</span> <span class="s1">'MYSECRETAPIKEY'</span> <span class="p">},</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/databases'</span><span class="p">,</span>
    <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
      <span class="c1">//Do something</span>
    <span class="p">}</span>
  <span class="p">});</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">MYSECRETAPIKEY</code> with your API key.</p>
</blockquote>

<p>Each user in the application is assigned an API Key when they are registered. This key is unique and should be considered a secret (i.e. do not share your key with anyone else). Your API Key is required for all interactions with the API, without the key, or with an incorrect key you will not be able to access the API.</p>

<p><code class="prettyprint">apikey: INSERTYOURAPIKEYHERE</code></p>

<aside class="notice">
You must replace `INSERTYOURAPIKEYHERE` with your personal API key.
</aside>

<h1 id="databases">Databases</h1>

<p>This is probably the simplest API method that we offer, it provides a simple list of databases that a user has access to.</p>

<h2 id="get-all-databases">Get All Databases</h2>
<pre><code class="highlight java"><span class="cm">/**
 * Get a list of databases that the current user has access to
 *  
 * @return
 * @throws ClientProtocolException
 * @throws IOException
 * @throws JsonException
 */</span>
<span class="kd">public</span> <span class="n">JsonJavaArray</span> <span class="nf">getDatabases</span><span class="p">(</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">JsonException</span><span class="o">{</span>
    <span class="n">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">loadURL</span><span class="o">(</span><span class="s">"/1.0/databases"</span><span class="o">);</span>
    <span class="n">JsonJavaFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">JsonJavaFactory</span><span class="o">.</span><span class="na">instanceEx</span><span class="o">;</span>
    <span class="n">JsonJavaObject</span> <span class="n">json</span> <span class="o">=</span> <span class="o">(</span><span class="n">JsonJavaObject</span><span class="o">)</span> <span class="n">JsonParser</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">factory</span><span class="o">,</span> <span class="n">responseBody</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="na">getAsArray</span><span class="o">(</span><span class="s">"databases"</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
 * Helper method to request a URL from the LDC Via service
 * @param url
 * @return
 * @throws ClientProtocolException
 * @throws IOException
 */</span>
<span class="kd">private</span> <span class="n">String</span> <span class="nf">loadURL</span><span class="p">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">CloseableHttpClient</span> <span class="n">httpclient</span> <span class="o">=</span> <span class="n">HttpClients</span><span class="o">.</span><span class="na">createDefault</span><span class="o">();</span>
    <span class="n">HttpGet</span> <span class="n">httpget</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpGet</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">baseurl</span> <span class="o">+</span> <span class="n">url</span><span class="o">);</span>

    <span class="c1">// Create a custom response handler</span>
    <span class="n">ResponseHandler</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">responseHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResponseHandler</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="n">handleResponse</span><span class="o">(</span><span class="kd">final</span> <span class="n">HttpResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getStatusCode</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">status</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">HttpEntity</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">();</span>
                <span class="k">return</span> <span class="n">entity</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">EntityUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">entity</span><span class="o">)</span> <span class="o">:</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">ClientProtocolException</span><span class="o">(</span><span class="s">"Unexpected response status: "</span> <span class="o">+</span> <span class="n">status</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">};</span>
    <span class="n">httpget</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"apikey"</span><span class="o">,</span> <span class="s">"MYSECRETAPIKEY"</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">httpclient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">httpget</span><span class="o">,</span> <span class="n">responseHandler</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="s1">'https://example.com'</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="s1">'MYSECRETAPIKEY'</span><span class="p">;</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="nx">root</span> <span class="o">+</span> <span class="s1">'/1.0/databases'</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">data</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span>
    <span class="p">},</span>
    <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"databases"</span><span class="p">:[</span><span class="w">
    </span><span class="s2">"acme-com-discussion"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"acme-com-discussion2"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint retrieves all databases that you have access to.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/1.0/databases</code></p>

<h2 id="delete-entire-database">Delete Entire Database</h2>

<p>Use this method to delete a database. You must be a super user to perform this operation, otherwise you will receive a 401 error.</p>
<pre><code class="highlight java"><span class="c1">//TODO: We need a sample here</span>
</code></pre>
<pre><code class="highlight javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span> <span class="p">},</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/databases/'</span> <span class="o">+</span> <span class="nx">database</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
    <span class="c1">//do something</span>
  <span class="p">},</span>
  <span class="nx">error</span><span class="err">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">401</span><span class="p">){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">"You do not have the rights to delete the database"</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">status</span> <span class="o">+</span> <span class="s1">'\n'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>If you can delete the database you will see:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://example.com/1.0/collections/:database/:collectionname</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service</td>
</tr>
</tbody></table>

<h1 id="collections">Collections</h1>

<h2 id="get-all-collections-in-a-database">Get All Collections in a Database</h2>

<p>Given a database name, this method will return a list of all collections in the database along with a count of documents in each collection.</p>

<p>The counts of the documents have document level security applied to them, so if there are 100 documents in the collection but the user can see only 10, then the count will be 10.</p>
<pre><code class="highlight java"><span class="cm">/**
 * Gets a list of collections for the given database
 * Each element contains two properties: collection and count. Count is relative to the api key used to get the collection list
 * @param dbname
 * @return
 * @throws ClientProtocolException
 * @throws IOException
 * @throws JsonException
 */</span>
<span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"unchecked"</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">ArrayList</span> <span class="nf">getCollections</span><span class="p">(</span><span class="n">String</span> <span class="n">dbname</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">JsonException</span><span class="o">{</span>
    <span class="n">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">loadURL</span><span class="o">(</span><span class="s">"/1.0/collections/"</span> <span class="o">+</span> <span class="n">dbname</span><span class="o">);</span>

    <span class="n">JsonJavaFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">JsonJavaFactory</span><span class="o">.</span><span class="na">instanceEx</span><span class="o">;</span>
    <span class="n">ArrayList</span> <span class="n">list</span> <span class="o">=</span> <span class="o">(</span><span class="n">ArrayList</span><span class="o">)</span> <span class="n">JsonParser</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">factory</span><span class="o">,</span> <span class="n">responseBody</span><span class="o">);</span>
    <span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="k">new</span> <span class="n">CollectionComparator</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
<span class="o">}</span>

<span class="cm">/**
 * Helper method to request a URL from the LDC Via service
 * @param url
 * @return
 * @throws ClientProtocolException
 * @throws IOException
 */</span>
<span class="kd">private</span> <span class="n">String</span> <span class="nf">loadURL</span><span class="p">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">CloseableHttpClient</span> <span class="n">httpclient</span> <span class="o">=</span> <span class="n">HttpClients</span><span class="o">.</span><span class="na">createDefault</span><span class="o">();</span>
    <span class="n">HttpGet</span> <span class="n">httpget</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpGet</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">baseurl</span> <span class="o">+</span> <span class="n">url</span><span class="o">);</span>

    <span class="c1">// Create a custom response handler</span>
    <span class="n">ResponseHandler</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">responseHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResponseHandler</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="n">handleResponse</span><span class="o">(</span><span class="kd">final</span> <span class="n">HttpResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getStatusCode</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">status</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">HttpEntity</span> <span class="n">entity</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getEntity</span><span class="o">();</span>
                <span class="k">return</span> <span class="n">entity</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">EntityUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">entity</span><span class="o">)</span> <span class="o">:</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="n">ClientProtocolException</span><span class="o">(</span><span class="s">"Unexpected response status: "</span> <span class="o">+</span> <span class="n">status</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">};</span>
    <span class="n">httpget</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"apikey"</span><span class="o">,</span> <span class="s">"MYSECRETAPIKEY"</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">httpclient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">httpget</span><span class="o">,</span> <span class="n">responseHandler</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="s1">'https://example.com'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="s1">'MYSECRETAPIKEY'</span><span class="p">;</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">root</span> <span class="o">+</span> <span class="s1">'/1.0/collections/'</span> <span class="o">+</span> <span class="nx">dbname</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span>
  <span class="p">},</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"collection"</span><span class="p">:</span><span class="s2">"Response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"collection"</span><span class="p">:</span><span class="s2">"ResponseToResponse"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="mi">7</span><span class="w">  
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"collection"</span><span class="p">:</span><span class="s2">"MainTopic"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/1.0/collections/:database</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service</td>
</tr>
</tbody></table>

<h2 id="get-all-documents-in-a-collection">Get All Documents In a Collection</h2>

<p>Description</p>
<pre><code class="highlight java"><span class="cm">/**
 * Get a list of documents from a collection
 * Document level security applies
 * @param dbname
 * @param collection
 * @param position
 * @return
 * @throws ClientProtocolException
 * @throws IOException
 * @throws JsonException
 */</span>
<span class="kd">public</span> <span class="n">JsonJavaArray</span> <span class="nf">getDocuments</span><span class="p">(</span><span class="n">String</span> <span class="n">dbname</span><span class="o">,</span> <span class="n">String</span> <span class="n">collection</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">JsonException</span><span class="o">{</span>
    <span class="n">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">loadURL</span><span class="o">(</span><span class="s">"/1.0/collections/"</span> <span class="o">+</span> <span class="n">dbname</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">collection</span> <span class="o">+</span> <span class="s">"?start="</span> <span class="o">+</span> <span class="n">position</span><span class="o">);</span>

    <span class="n">JsonJavaFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">JsonJavaFactory</span><span class="o">.</span><span class="na">instanceEx</span><span class="o">;</span>
    <span class="n">JsonJavaObject</span> <span class="n">json</span> <span class="o">=</span> <span class="o">(</span><span class="n">JsonJavaObject</span><span class="o">)</span> <span class="n">JsonParser</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">factory</span><span class="o">,</span> <span class="n">responseBody</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="na">getAsArray</span><span class="o">(</span><span class="s">"data"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
<pre><code class="highlight javascript"><span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="s1">'https://example.com'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">apikey</span> <span class="o">=</span> <span class="s1">'MYSECRETAPIKEY'</span><span class="p">;</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">root</span> <span class="o">+</span> <span class="s1">'/1.0/collections/'</span> <span class="o">+</span> <span class="nx">dbname</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">collectionname</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span>
  <span class="p">},</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"_id"</span><span class="p">:</span><span class="s2">"53c8cf7983217c4dd0a5580b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Title"</span><span class="p">:</span><span class="s2">"This is the title"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Body"</span><span class="p">:</span><span class="s2">"LDC Via frees your Domino data to be used in other applications or to\r\nallow the sunsetting of your Domino infrastructure without losing the data\r\nand security that you have grown used to.\r\n\r\n(See attached file: API.xlsx)"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Body__parsed"</span><span class="p">:</span><span class="s2">"LDC Via frees your Domino data to be used in other applications or to\r\nallow the sunsetting of your Domino infrastructure without losing the data\r\nand security that you have grown used to.\r\n\r\n(See attached file: API.xlsx)"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"readers"</span><span class="p">:[</span><span class="w"> </span><span class="s2">"CN=Matt White/O=Exhilarate"</span><span class="p">,</span><span class="w"> </span><span class="s2">"CN=Fred Bloggs/O=FCL"</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="s2">"__unid"</span><span class="p">:</span><span class="s2">"C56DB3F14258431380257D190026303A"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__noteid"</span><span class="p">:</span><span class="s2">"10F2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__created"</span><span class="p">:</span><span class="s2">"2014-07-18T06:57:07Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__modified"</span><span class="p">:</span><span class="s2">"2014-07-18T07:21:31Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__authors"</span><span class="p">:</span><span class="s2">"CN=Matt White/O=Exhilarate"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__form"</span><span class="p">:</span><span class="s2">"MainTopic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"_files"</span><span class="p">:[</span><span class="w"> </span><span class="s2">"API.xlsx"</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://example.com/1.0/collections/:database/:collectionname</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service</td>
</tr>
<tr>
<td>:collectionname</td>
<td>The name of the collection to get documents from</td>
</tr>
</tbody></table>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>count</td>
<td>30</td>
<td>The number of documents to get data for.</td>
</tr>
<tr>
<td>start</td>
<td>0</td>
<td>The starting position in the view, use this to page through documents</td>
</tr>
</tbody></table>

<h3 id="response-json">Response JSON</h3>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>count</td>
<td>the total count of documents in the collection that the current user can see</td>
</tr>
<tr>
<td>data</td>
<td>an array of document objects. the size of this array will not exceed the count URL parameter even if there are more documents in the collection. You will need to page through the data to get it all.</td>
</tr>
<tr>
<td>_id</td>
<td>internal unique reference id</td>
</tr>
<tr>
<td>rich text fields</td>
<td>when accessed via a collection all formatting is removed and a plain text representation of the content is returned. For full access to the rich text load the relevant document. Rich Text fields always have a second &ldquo;__parsed&rdquo; version of the field that can be used for searching purposes, this allows binary data to be stored in the primary rich text field</td>
</tr>
<tr>
<td>system fields</td>
<td>fields prefixed with __ are system fields that relate to your original Domino data. If the document has file attachments associated with it, the names of the files can be found in the field _files</td>
</tr>
</tbody></table>

<h2 id="delete-entire-collection">Delete entire collection</h2>

<p>To delete a collection, use this method. You must be a super user to perform this operation, or you will receive a 401 error.</p>
<pre><code class="highlight java"><span class="c1">//TODO: We need sample code here</span>
</code></pre>
<pre><code class="highlight javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span> <span class="p">},</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/collections/'</span> <span class="o">+</span> <span class="nx">database</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">collection</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
    <span class="nx">getDBCollections</span><span class="p">(</span><span class="nx">database</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">error</span><span class="err">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">401</span><span class="p">){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">"You do not have the rights to delete the collection"</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">status</span> <span class="o">+</span> <span class="s1">'\n'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

</code></pre>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://example.com/1.0/collections/:database/:collectionname</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service</td>
</tr>
<tr>
<td>:collectionname</td>
<td>The name of the collection to delete</td>
</tr>
</tbody></table>

<h2 id="search-in-a-collection">Search in a collection</h2>

<p>To perform a search against a collection, you can submit queries to be run against one or more fields.</p>
<pre><code class="highlight java"><span class="c1">//TODO: Sample code required</span>
</code></pre>
<pre><code class="highlight javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span>
  <span class="p">},</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"filters"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s2">"operator"</span><span class="p">:</span> <span class="s2">"contains"</span><span class="p">,</span>
      <span class="s2">"field"</span><span class="p">:</span> <span class="s2">"FieldToSearch"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="p">:</span> <span class="nx">query</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">"operator"</span><span class="p">:</span> <span class="s2">"equals"</span><span class="p">,</span>
      <span class="s2">"field"</span><span class="p">:</span> <span class="s2">"From"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="p">:</span> <span class="nx">query</span>
    <span class="p">}]</span>
  <span class="p">},</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/search/'</span> <span class="o">+</span> <span class="nx">dbname</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">collectionname</span> <span class="o">+</span> <span class="s2">"?count=10&amp;start="</span> <span class="o">+</span> <span class="nx">start</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Do something</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"count"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"_id"</span><span class="p">:</span><span class="s2">"53c8cf7983217c4dd0a5580b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Title"</span><span class="p">:</span><span class="s2">"This is the title"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Body"</span><span class="p">:</span><span class="s2">"NSF2MongoDB frees your Domino data to be used in other applications or to\r\nallow the sunsetting of your Domino infrastructure without losing the data\r\nand security that you have grown used to.\r\n\r\n(See attached file: API.xlsx)"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"readers"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"CN=Matt White/O=Exhilarate"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CN=Fred Bloggs/O=FCL"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"__unid"</span><span class="p">:</span><span class="s2">"C56DB3F14258431380257D190026303A"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__noteid"</span><span class="p">:</span><span class="s2">"10F2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__created"</span><span class="p">:</span><span class="s2">"2014-07-18T06:57:07Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__modified"</span><span class="p">:</span><span class="s2">"2014-07-18T07:21:31Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__authors"</span><span class="p">:</span><span class="s2">"CN=Matt White/O=Exhilarate"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__form"</span><span class="p">:</span><span class="s2">"MainTopic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"_files"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"API.xlsx"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://example.com/1.0/collections/:database/:collectionname</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service</td>
</tr>
</tbody></table>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>count</td>
<td>30</td>
<td>The number of documents to get data for.</td>
</tr>
<tr>
<td>start</td>
<td>0</td>
<td>The starting position in the view, use this to page through documents</td>
</tr>
</tbody></table>

<h3 id="response-json">Response JSON</h3>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>count</td>
<td>the total count of documents in the collection that the current user can see</td>
</tr>
<tr>
<td>data</td>
<td>an array of document objects. the size of this array will not exceed the count URL parameter even if there are more documents in the collection. You will need to page through the data to get it all.</td>
</tr>
<tr>
<td>_id</td>
<td>internal unique reference id</td>
</tr>
<tr>
<td>rich text fields</td>
<td>when accessed via a collection all formatting is removed and a plain text representation of the content is returned. For full access to the rich text load the relevant document. Rich Text fields always have a second &ldquo;__parsed&rdquo; version of the field that can be used for searching purposes, this allows binary data to be stored in the primary rich text field</td>
</tr>
<tr>
<td>system fields</td>
<td>fields prefixed with __ are system fields that relate to your original Domino data. If the document has file attachments associated with it, the names of the files can be found in the field _files</td>
</tr>
</tbody></table>

<h1 id="documents">Documents</h1>

<h2 id="get-a-document">Get a document</h2>

<p>To get the full detail for a document, use this method.</p>
<pre><code class="highlight java"><span class="cm">/**
 * Get full detail for an individual document
 * @param dbname
 * @param collection
 * @param unid
 * @return
 * @throws ClientProtocolException
 * @throws IOException
 * @throws JsonException
 */</span>
<span class="kd">public</span> <span class="n">JsonJavaObject</span> <span class="nf">getDocument</span><span class="p">(</span><span class="n">String</span> <span class="n">dbname</span><span class="o">,</span> <span class="n">String</span> <span class="n">collection</span><span class="o">,</span> <span class="n">String</span> <span class="n">unid</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClientProtocolException</span><span class="o">,</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">JsonException</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">responseBody</span> <span class="o">=</span> <span class="n">loadURL</span><span class="o">(</span><span class="s">"/1.0/document/"</span> <span class="o">+</span> <span class="n">dbname</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">collection</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">unid</span><span class="o">);</span>

    <span class="n">JsonJavaFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">JsonJavaFactory</span><span class="o">.</span><span class="na">instanceEx</span><span class="o">;</span>
    <span class="n">JsonJavaObject</span> <span class="n">json</span> <span class="o">=</span> <span class="o">(</span><span class="n">JsonJavaObject</span><span class="o">)</span> <span class="n">JsonParser</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">factory</span><span class="o">,</span> <span class="n">responseBody</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
<pre><code class="highlight javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span>
  <span class="p">},</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/document/'</span> <span class="o">+</span> <span class="nx">dbname</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">collectionname</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">unid</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Do Something</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="s2">"53c8cf7783217c4dd0a557f6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Formname"</span><span class="p">:</span><span class="s2">"Response"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ThreadSort"</span><span class="p">:</span><span class="s2">" 201218/062011:17:20 771AB2C8B80E229980257A210038850A"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ThreadIndent"</span><span class="p">:</span><span class="s2">". . "</span><span class="p">,</span><span class="w">
  </span><span class="s2">"From"</span><span class="p">:</span><span class="s2">"CN=Matt White/O=Exhilarate"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ParentForm"</span><span class="p">:</span><span class="s2">"Response"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ParentSubject"</span><span class="p">:</span><span class="s2">"Response"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Categories"</span><span class="p">:</span><span class="s2">"Sales"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Body"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"multipart"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"content"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contentType"</span><span class="p">:</span><span class="s2">"multipart/alternative; Boundary=\"0__=0FBBF78ADFB9AAF98f9e8a93df938690918c0FBBF78ADFB9AAF9\""</span><span class="p">,</span><span class="w">
</span><span class="s2">"contentDisposition"</span><span class="p">:</span><span class="s2">"inline"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contentType"</span><span class="p">:</span><span class="s2">"text/plain; charset=US-ASCII"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="s2">"This looks good to me - we need to make sure that the right Project Manager\r\nis assigned to this project"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"boundary"</span><span class="p">:</span><span class="s2">"--0__=0FBBF78ADFB9AAF98f9e8a93df938690918c0FBBF78ADFB9AAF9"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contentType"</span><span class="p">:</span><span class="s2">"text/html; charset=US-ASCII"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contentDisposition"</span><span class="p">:</span><span class="s2">"inline"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="s2">"&lt;html&gt;&lt;body&gt;&lt;font size=\"1\" face=\"sans-serif\"&gt;This looks good to me - we need to make sure that the right Project Manager is assigned to this project &lt;/font&gt;&lt;/body&gt;&lt;/html&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"boundary"</span><span class="p">:</span><span class="s2">"--0__=0FBBF78ADFB9AAF98f9e8a93df938690918c0FBBF78ADFB9AAF9"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"Body__parsed"</span><span class="p">:</span><span class="s2">"&lt;html&gt;&lt;body&gt;&lt;font size=\"1\" face=\"sans-serif\"&gt;This looks good to me - we need to make sure that the right Project Manager is assigned to this project &lt;/font&gt;&lt;/body&gt;&lt;/html&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Subject"</span><span class="p">:</span><span class="s2">"Looks good to me"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__href"</span><span class="p">:</span><span class="s2">"http://dev.londc.com:80/demos/Discussion.nsf/api/data/documents/unid/FC7D00934676A6B580257D1900278BAA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__unid"</span><span class="p">:</span><span class="s2">"FC7D00934676A6B580257D1900278BAA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__noteid"</span><span class="p">:</span><span class="s2">"114E"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__parentid"</span><span class="p">:</span><span class="s2">"E2445C89357BB15080257D1900278BA9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__created"</span><span class="p">:</span><span class="s2">"2014-07-18T07:11:56Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__modified"</span><span class="p">:</span><span class="s2">"2014-07-18T07:13:19Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__authors"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="w"> </span><span class="s2">"CN=Matt White/O=Exhilarate"</span><span class="p">,</span><span class="w"> </span><span class="s2">"CN=Matt White/O=Exhilarate"</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="s2">"__form"</span><span class="p">:</span><span class="s2">"Response"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"_files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"api.xls"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://example.com/1.0/collections/:database/:collectionname/:unid</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service.</td>
</tr>
<tr>
<td>:collectionname</td>
<td>The name of the collection that contains the document</td>
</tr>
<tr>
<td>:unid</td>
<td>The unique ID of the document to get (this maps to the __unid field, not the _id field)</td>
</tr>
</tbody></table>

<h2 id="insert-a-new-document">Insert a new document</h2>

<p>To insert a new document, use the PUT method and send JSON data to the service. If a document with the :unid already exists in the collection, an error will be returned. Use the POST method to update existing documents.</p>

<p>If the collection name (or database name) do not currently exist then they will automatically be created. By this process you can effectively create a brand new database by simply inserting a new document. Bear in mind that you will need to set up security for the database once it has been created.</p>
<pre><code class="highlight java"><span class="c1">//TODO: Add Sample Code</span>
</code></pre>
<pre><code class="highlight javascript"><span class="c1">//Taken from our Discussion template</span>
<span class="nx">disc</span><span class="p">.</span><span class="nx">saveNewMainTopic</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">fileInput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#fileupload"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fileInput</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">();</span>
  <span class="c1">//Start building the document data</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">FormName</span> <span class="o">=</span> <span class="s2">"MainTopic"</span><span class="p">;</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">__form</span> <span class="o">=</span> <span class="s2">"MainTopic"</span><span class="p">;</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">Categories</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#categories option:selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">From</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">AbbreviateFrom</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">Body</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"multipart"</span><span class="p">,</span>
    <span class="s2">"content"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s2">"contentType"</span><span class="p">:</span> <span class="s2">"text/plain; charset=UTF-8"</span><span class="p">,</span>
      <span class="s2">"data"</span><span class="p">:</span> <span class="nx">CKEDITOR</span><span class="p">.</span><span class="nx">instances</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">getData</span><span class="p">()</span>
    <span class="p">}]</span>
  <span class="p">};</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">Subject</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#subject"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">__created</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">();</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">__modified</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Convert the file attachment to BASE64 string</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="s2">"contentType"</span><span class="p">:</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s2">"; name=\""</span> <span class="o">+</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">"\""</span><span class="p">,</span>
        <span class="s2">"contentDisposition"</span><span class="p">:</span> <span class="s2">"attachment; filename=\""</span> <span class="o">+</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">"\""</span><span class="p">,</span>
        <span class="s2">"contentTransferEncoding"</span><span class="p">:</span> <span class="s2">"base64"</span><span class="p">,</span>
        <span class="s2">"data"</span><span class="p">:</span> <span class="nx">reader</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/,</span><span class="se">(</span><span class="sr">.*</span><span class="se">)</span><span class="sr">$/</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
      <span class="p">});</span>
      <span class="nx">disc</span><span class="p">.</span><span class="nx">sendNewMainTopic</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">disc</span><span class="p">.</span><span class="nx">sendNewMainTopic</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">disc</span><span class="p">.</span><span class="nx">sendNewMainTopic</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">unid</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span>
    <span class="p">},</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">data</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/document/'</span> <span class="o">+</span> <span class="nx">dbname</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">FormName</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">unid</span><span class="p">,</span>
    <span class="na">complete</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//Do something</span>
    <span class="p">}</span>
  <span class="p">});</span>

<span class="p">}</span>
</code></pre>

<blockquote>
<p>If the document is inserted correctly, the above returns a 200 success code, otherwise you will receive an error</p>
</blockquote>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PUT https://example.com/1.0/collections/:database/:collectionname/:unid</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service.</td>
</tr>
<tr>
<td>:collectionname</td>
<td>The name of the collection into which the document will be inserted</td>
</tr>
<tr>
<td>:unid</td>
<td>The unique identifier of the document to be inserted</td>
</tr>
</tbody></table>

<h2 id="update-an-existing-document">Update an existing document</h2>

<p>When you want to update a document use this method. You only need to post the fields that you want to update. Those fields will overwrite matching fields in the document, or add them if they don&rsquo;t already exist. To remove a field set its value to null.</p>

<p>If the document does not exist then an error will be returned, in this case you should use the PUT method instead.</p>
<pre><code class="highlight java"><span class="c1">//TODO: Add Sample Code</span>
</code></pre>
<pre><code class="highlight javascript"><span class="c1">//Taken from our Discussion template</span>
<span class="nx">disc</span><span class="p">.</span><span class="nx">saveMainTopic</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">unid</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">fileInput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#fileupload"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fileInput</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">();</span>
  <span class="c1">//Start building the document data</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">FormName</span> <span class="o">=</span> <span class="s2">"MainTopic"</span><span class="p">;</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">__form</span> <span class="o">=</span> <span class="s2">"MainTopic"</span><span class="p">;</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">Categories</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#categories option:selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">From</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">AbbreviateFrom</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">Body</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"multipart"</span><span class="p">,</span>
    <span class="s2">"content"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="s2">"contentType"</span><span class="p">:</span> <span class="s2">"text/plain; charset=UTF-8"</span><span class="p">,</span>
      <span class="s2">"data"</span><span class="p">:</span> <span class="nx">CKEDITOR</span><span class="p">.</span><span class="nx">instances</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">getData</span><span class="p">()</span>
    <span class="p">}]</span>
  <span class="p">};</span>
  <span class="nx">data</span><span class="p">.</span><span class="nx">Subject</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#subject"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Convert the file attachment to BASE64 string</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="s2">"contentType"</span><span class="p">:</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s2">"; name=\""</span> <span class="o">+</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">"\""</span><span class="p">,</span>
        <span class="s2">"contentDisposition"</span><span class="p">:</span> <span class="s2">"attachment; filename=\""</span> <span class="o">+</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">"\""</span><span class="p">,</span>
        <span class="s2">"contentTransferEncoding"</span><span class="p">:</span> <span class="s2">"base64"</span><span class="p">,</span>
        <span class="s2">"data"</span><span class="p">:</span> <span class="nx">reader</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/,</span><span class="se">(</span><span class="sr">.*</span><span class="se">)</span><span class="sr">$/</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
      <span class="p">});</span>
      <span class="nx">disc</span><span class="p">.</span><span class="nx">sendNewMainTopic</span><span class="p">(</span><span class="nx">unid</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">disc</span><span class="p">.</span><span class="nx">sendMainTopic</span><span class="p">(</span><span class="nx">unid</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">disc</span><span class="p">.</span><span class="nx">sendMainTopic</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">unid</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span>
    <span class="p">},</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">data</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/document/'</span> <span class="o">+</span> <span class="nx">dbname</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">FormName</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">unid</span><span class="p">,</span>
    <span class="na">complete</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//Do something</span>
    <span class="p">}</span>
  <span class="p">});</span>

<span class="p">}</span>
</code></pre>

<blockquote>
<p>If the document is updated correctly, the above returns a 200 success code, otherwise you will receive an error</p>
</blockquote>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://example.com/1.0/collections/:database/:collectionname/:unid</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service.</td>
</tr>
<tr>
<td>:collectionname</td>
<td>The name of the collection in which the document will be updated</td>
</tr>
<tr>
<td>:unid</td>
<td>The unique identifier of the document to be updated</td>
</tr>
</tbody></table>

<h2 id="delete-a-document">Delete a document</h2>

<p>To delete a document, use this method. You must have the rights to update the document</p>
<pre><code class="highlight java"><span class="c1">//TODO: We need sample code here</span>
</code></pre>
<pre><code class="highlight javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span> <span class="p">},</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/collections/'</span> <span class="o">+</span> <span class="nx">database</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">collection</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">unid</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
    <span class="c1">//Do something</span>
  <span class="p">},</span>
  <span class="nx">error</span><span class="err">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">401</span><span class="p">){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">"You do not have the rights to delete the document"</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">status</span> <span class="o">+</span> <span class="s1">'\n'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

</code></pre>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://example.com/1.0/collections/:database/:collectionname/:unid</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service</td>
</tr>
<tr>
<td>:collectionname</td>
<td>The name of the collection to delete</td>
</tr>
<tr>
<td>:unid</td>
<td>The unid of the document to delete</td>
</tr>
</tbody></table>

<h1 id="file-attachments">File Attachments</h1>

<p>Given a database name, collection name, document id and attachment name, you can either download the attachment or delete it from the database. To insert new attachments, use the document PUT or POST methods.</p>

<h2 id="get-a-file-attachment">Get a File Attachment</h2>
<pre><code class="highlight java"><span class="c1">//TODO: We need sample code here</span>
</code></pre>
<pre><code class="highlight javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"https://example.com/1.0/attachment/:database/:collectionname/:unid/:filename"</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>If the file exists (and you are allowed to access it), then the file will be sent as a binary stream to the requestor. If the file does not exists (or you are not allowed to access it) then an error will be returned.</p>
</blockquote>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://example.com/1.0/collections/:database/:collectionname/:unid/:filename</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service</td>
</tr>
<tr>
<td>:collectionname</td>
<td>The name of the collection to delete</td>
</tr>
<tr>
<td>:unid</td>
<td>The unid of the document to delete</td>
</tr>
<tr>
<td>:filename</td>
<td>The name of the file to access (can be retrieved from _files field on any document)</td>
</tr>
</tbody></table>

<h2 id="delete-a-file-attachment">Delete a file attachment</h2>

<p>To delete a file attachment, use this method. You must have the rights to update the document to which the file is associated</p>
<pre><code class="highlight java"><span class="c1">//TODO: We need sample code here</span>
</code></pre>
<pre><code class="highlight javascript"><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="s1">'apikey'</span><span class="p">:</span> <span class="nx">apikey</span> <span class="p">},</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'/1.0/collections/'</span> <span class="o">+</span> <span class="nx">database</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">collection</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">unid</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="nx">filename</span><span class="p">,</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
    <span class="c1">//Do something</span>
  <span class="p">},</span>
  <span class="nx">error</span><span class="err">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">error</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">401</span><span class="p">){</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">"You do not have the rights to delete the filename"</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">status</span> <span class="o">+</span> <span class="s1">'\n'</span> <span class="o">+</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

</code></pre>

<blockquote>
<p>The above returns JSON structured like this:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE https://example.com/1.0/collections/:database/:collectionname/:unid/:filename</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>:database</td>
<td>This is the unique name of the database which can be accessed using the databases service</td>
</tr>
<tr>
<td>:collectionname</td>
<td>The name of the collection to delete</td>
</tr>
<tr>
<td>:unid</td>
<td>The unid of the document to delete</td>
</tr>
<tr>
<td>:filename</td>
<td>The name of the file to delete (can be retrieved from _files field on any document)</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<aside class="notice">If an operation fails you will receive an error code, and a message in the response from our server</aside>

<p>The LDC Via API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; You&rsquo;re trying to do something that you are not allowed to</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified request could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a URL with an invalid method</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
